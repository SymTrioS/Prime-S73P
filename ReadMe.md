<h1 align="center">Prime-S73P</h1>
<p align="center">
<img src="https://github.com/SymTrioS/Prime-S73P/blob/main/Jpg/Prime-S73P_01.jpg" width="60%"></p>
<h3 align="center">The Prime controller integrates three computing units:</h3>

- a user interface processor with a Linux OS and standard I/O devices;

- a hardware-specific data processing unit based on programmable logic;

- a microcontroller-based analog and digital signal processing unit.
  
<h4 align="center">To facilitate the development and debugging of controller software, the board includes a microcontroller programmer and debugger, a dual-channel USB-to-UART converter, and an interface for configuring programmable logic.</h4>
  
<h4 align="center">Built-in programming, debugging, and monitoring functions are accessible via a USB Type-C connector.</h4>

<h2 align="center">Functional diagram</h2>
<p align="center">
<img src="https://github.com/SymTrioS/Prime-S73P/blob/main/Jpg/Prime-S73P_Func.jpg" width="100%"></p>

<h2 align="center">Controller Components</h2>

**F1C200S Microprocessor**
* ARM9 architecture, 408 MHz, 64 MB RAM;
* Support H.264 BP/MP/HP up to 1280x720@30fps decoding, support NTSC/PAL CVBS Input;
* USB-A HOST, UART, SPI, I2C, GPIO interfaces are available on the connectors of the board;
* Connectors for connecting an LCD display and a camera (up to 5Mega pixel) are also located on the board.


**FPGA Gowin GW1NR-LV9QN88P**
* 8640 LUT, 6480 Flip-Flop;
* FLASH capacity of 608 Kbit, RAM capacity is 468 Kbit;
* There is also additional RAM inside the chip: 64 Mbit PSRAM (4Mx16 bit);
* HDMI, GPIO interfaces, as well as arbitrary user interfaces specified by the FPGA configuration are available on the board connectors;
* The uSD connector of the memory card is connected to the chip, which can be connected via internal circuits to the F1C200S microprocessor;
* External components connected to the chip: 32 Mbit FLASH memory W25Q32, two 12-bit ADCs ADC121 and an ESP-03 Wi-Fi module.


**GD32F303CCT6 Microcontroller**
* Arm® Cortex®-M4 architecture, 120 MHz;
* 256 KB FLASH memory, 48 KB of SRAM;
* Analog I/O and UART, SPI, I2C, CAN, and GPIO interfaces are available on the board connectors;
* 2x12-bit DAC/2x12-bit ADC + 3x12-bit ADC analog channels available;
* Two external memory chips are connected to the microcontroller: SPI-FLASH W25Q64 (8 MB) and I2C-EEPROM M24C64(8 KB);
* An external 16-bit 4-channel ADS1120 ADC and two 12-bit DAC7311 DACs are connected via the SPI interface;
* There is an SPI/GPIO connector on the board, which can be used to connect an SPI display.

<h2 align="center">Getting started</h2>

1. Connect the board (USB Type-C connector) with a cable to the computer.

2. Three devices should appear in the computer system:
* microcontroller debugger CMSIS-DAP-S and
* two COM ports (USB-UART converters):
    - the first converter is connected to the UART console of the F1C200S processor via the internal FPGA configuration, as well as the jumpers installed on the board. At the same time, if a USB memory card with a Linux image is installed, then in the terminal window (115200.8,N) you can see information about the boot the operating system, followed by an invitation to enter your username and password (in the case of the Debian12: root/root assembly included in the 'uSD' directory), to prepare your system build, use the instructions in the folder 'Doc' 
    - the second converter is connected to the microcontroller's UART to output information generated by its control program. In the case of the test program, these are: the values of the cyclically variable voltage DAC-B, the values of the digitized voltage using the ADS1120 input connected by a jumper, and the values obtained from two ADC121 connected to the FPGA

<p align="center">
<img src="https://github.com/SymTrioS/Prime-S73P/blob/main/Jpg/Com67.png" width="100%"></p>

3. The test program is available in two IDE versions:  
   * IAR: https://github.com/SymTrioS/GD32F303CC_IAR  
   * VSC: https://github.com/SymTrioS/GD32F303CC_VSC  

<p align="center">
<img src="https://github.com/SymTrioS/Prime-S73P/blob/main/Jpg/Prime-S73P_IAR_VSC.png" width="100%"></p>

4. The FPGA configuration is set by a test case for the Gowin development environment: https://github.com/SymTrioS/GW1NR-LV9

<p align="center">
<img src="https://github.com/SymTrioS/Prime-S73P/blob/main/Jpg/Gowin.png" width="60%"></p>

5. If necessary, you can use the already prepared files located in the 'Bin' directory: hex-file for the firmware of the GD32F303 microcontroller and fs-file for FPGA configuration.

6. These files are already embedded in the microcontroller and FPGA, as they are used for testing.

7. When the board is running, you can observe the flashing of custom blue and red LEDs, as well as the green glow when the program accesses the FPGA registers - the readings of two external ADC121.

